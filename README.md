# TikHub C++ API Client SDK

**High-performance asynchronous API client for TikHub.io.**  
Supports: **Douyin(抖音), TikTok, Xiaohongshu(小红书), Kuaishou(快手), Weibo(微博), Instagram, YouTube(油管), Twitter(X), Captcha Solver(验证码解决器), Temp Mail(临时邮箱)**.

## **🌍 Overview**
This API client is auto-generated by [OpenAPI Generator](https://openapi-generator.tech).  
It allows seamless interaction with the **TikHub.io API** using a modern **C++ SDK**.

- **API version:** V5.2.9
- **Package Version:** V1.0.0
- **Build Date:** 2025-03-08
- **Base URL:** `https://api.tikhub.io`  
- **Namespace:** `io.tikhub.client.api`  
- **Model Namespace:** `org.openapitools.client.model`  
- **Dependencies:** `cpprestsdk (Casablanca)`

> Useful Links

- **🏠 Home**: [https://www.tikhub.io](https://www.tikhub.io)
- **👨‍💻 Github**: [https://github.com/TikHub](https://github.com/TikHub)
- **⚡ Documents (Swagger UI)**: [https://api.tikhub.io](https://api.tikhub.io)
- **🦊 Documents (Apifox UI)**: [https://docs.tikhub.io](https://docs.tikhub.io)
- **🐙 Demo Code (GitHub)**: [https://github.com/TikHub/TikHub-API-Demo](https://github.com/TikHub/TikHub-API-Demo)
- **📶 API Status**: [https://monitor.tikhub.io](https://monitor.tikhub.io)
- **📧 Support**: [Discord Server](https://discord.gg/aMEAS8Xsvz)

---

## **🔑 Authentication (API Key Setup)**
### **1️⃣ Setting API Token in Request Headers**
TikHub API requires authentication using an **API token**. The token should be included in the request headers as follows:

- **Header:** `Authorization`
- **Format:** `Bearer your_token`
- **Example:**  
  ```cpp
  apiClient->setAuthentication(U("Authorization"), U("Bearer your_token"));
  ```

#### **2️⃣ API Token Example**
```cpp
#include <iostream>
#include "ApiClient.h"
#include "api/TikHubUserAPIApi.h"

using namespace io::tikhub::client::api;

int main() {
    auto client = std::make_shared<ApiClient>();
    client->setBaseUrl(U("https://api.tikhub.io"));

    // 设置 API 令牌 / Set API Token
    client->setAuthentication(U("Authorization"), U("Bearer your_token"));

    TikHubUserAPIApi api(client);

    return 0;
}
```

---

## **⚙️ Installation**
### **1️⃣ Prerequisites**
Ensure you have installed `cpprestsdk`.

#### **Windows**
```sh
vcpkg install cpprestsdk cpprestsdk:x64-windows boost-uuid boost-uuid:x64-windows
```

#### **macOS**
```sh
brew install cpprestsdk
```

#### **Linux (Ubuntu/Debian)**
```sh
sudo apt-get install libcpprest-dev
```

### **2️⃣ Build**
#### **Using CMake**
```sh
cmake -DCPPREST_ROOT=/usr -DCMAKE_CXX_FLAGS="-I/usr/local/opt/openssl/include" -DCMAKE_MODULE_LINKER_FLAGS="-L/usr/local/opt/openssl/lib"
make
```

#### **Windows (Visual Studio)**
1. Right-click the project folder → **Open in Visual Studio**
2. Select **CMake > Build All**
3. If CMake is missing, install **"Desktop Development with C++"** via **Visual Studio Installer**

---

## **🚀 Usage Examples**
This example demonstrates how to use the **TikHubUserAPIApi** class for **calculating API request prices**.

### **1️⃣ Initialize API Client**
```cpp
#include <iostream>
#include "ApiClient.h"
#include "api/TikHubUserAPIApi.h"

using namespace io::tikhub::client::api;

int main() {
    // 创建 API 客户端 / Create API client
    auto client = std::make_shared<ApiClient>();
    client->setBaseUrl(U("https://api.tikhub.io"));  

    // 设置 API 令牌 / Set API Token
    client->setAuthentication(U("Authorization"), U("Bearer your_token"));

    // 初始化 API / Initialize API
    TikHubUserAPIApi api(client);

    return 0;
}
```

---

### **2️⃣ Get API Price Calculation (获取 API 价格计算)**
```cpp
#include <iostream>
#include "ApiClient.h"
#include "api/TikHubUserAPIApi.h"

using namespace io::tikhub::client::api;

int main() {
    // 初始化 API 客户端 / Initialize API client
    auto client = std::make_shared<ApiClient>();
    client->setBaseUrl(U("https://api.tikhub.io"));
    
    // 设置 API 令牌 / Set API Token
    client->setAuthentication(U("Authorization"), U("Bearer your_token"));

    // 创建 TikHub API 对象 / Create TikHub API object
    TikHubUserAPIApi api(client);

    // 发送价格计算请求 / Send price calculation request
    pplx::task<void> requestTask = api.calculatePriceApiV1TikhubUserCalculatePriceGet(U("video_download"), 5000)
        .then([](std::shared_ptr<ResponseModel> response) {
            if (response) {
                std::wcout << L"Response: " << response->toJson().serialize() << std::endl;
            } else {
                std::wcerr << L"Error: No response received." << std::endl;
            }
        })
        .then([](pplx::task<void> previousTask) {
            try {
                previousTask.get();  // 处理异常 / Handle exception
            } catch (const std::exception &e) {
                std::cerr << "Exception: " << e.what() << std::endl;
            }
        });

    requestTask.wait();  // 等待任务完成 / Wait for task completion
    return 0;
}
```

---

### **3️⃣ Retrieve All API Endpoints (获取所有 API 端点)**
```cpp
#include <iostream>
#include "ApiClient.h"
#include "api/TikHubUserAPIApi.h"

using namespace io::tikhub::client::api;

int main() {
    auto client = std::make_shared<ApiClient>();
    client->setBaseUrl(U("https://api.tikhub.io"));

    // 设置 API 令牌 / Set API Token
    client->setAuthentication(U("Authorization"), U("Bearer your_token"));

    TikHubUserAPIApi api(client);

    // 获取所有 API 端点 / Fetch all API endpoints
    pplx::task<void> requestTask = api.getAllEndpointsInfoApiV1TikhubUserGetAllEndpointsInfoGet()
        .then([](std::shared_ptr<ResponseModel> response) {
            if (response) {
                std::wcout << L"Endpoints Info: " << response->toJson().serialize() << std::endl;
            } else {
                std::wcerr << L"Error: No response received." << std::endl;
            }
        });

    requestTask.wait();
    return 0;
}
```

---

## **📌 API Endpoints**
| Endpoint | Description |
|----------|------------|
| `/api/v1/tikhub/user/calculate_price` | Calculate API price based on usage |
| `/api/v1/tikhub/user/get_all_endpoints_info` | Retrieve all available API endpoints |
| `/api/v1/tikhub/user/get_endpoint_info` | Get detailed information about a specific API endpoint |

More endpoints can be found in the folder `api` and `model`.

---

## **📢 Contributing**
If you would like to contribute, fork the repository and create a new branch. Pull requests are welcome!

---

## **📧 Contact**
- **Website:** [TikHub.io](https://tikhub.io)  
- **GitHub:** [Evil0ctal](https://github.com/Evil0ctal)  
- **Support Email:** support@tikhub.io  

---

## **📜 License**
This project is licensed under the **MIT License** - see the `LICENSE` file for details.